<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amigo Secreto de Ano Novo 2025 da FamÃ­lia</title>
    
    <!-- Fontes Google -->
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo-emoji">ğŸ</div>
            <h1>Amigo Secreto da FamÃ­lia</h1>
            <p class="subtitle">Virada de Ano â€¢ 31 de Dezembro de 2025</p>
        </div>
    </header>

    <div class="main-container">

        <!-- Card: Contagem Regressiva -->
        <section class="card card-countdown">
            <div class="card-header">
                <h2>â° Contagem Regressiva</h2>
            </div>
            <div class="card-body">
                <div class="countdown-timer">
                    <div class="time-unit">
                        <span class="number" id="days">00</span>
                        <span class="label">Dias</span>
                    </div>
                    <div class="time-unit">
                        <span class="number" id="hours">00</span>
                        <span class="label">Horas</span>
                    </div>
                    <div class="time-unit">
                        <span class="number" id="minutes">00</span>
                        <span class="label">Minutos</span>
                    </div>
                    <div class="time-unit">
                        <span class="number" id="seconds">00</span>
                        <span class="label">Segundos</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Card: Detalhes da Brincadeira -->
        <section class="card card-info">
            <div class="card-header">
                <h2>ğŸ‰ Detalhes da Brincadeira</h2>
            </div>
            <div class="card-body">
                <div class="info-item">
                    <div class="info-icon">ğŸ—“ï¸</div>
                    <div class="info-content">
                        <strong>Data:</strong>
                        <p>31 de Dezembro de 2025, durante nosso Jantar em FamÃ­lia na Virada do Ano.</p>
                    </div>
                </div>
                <div class="info-item">
                    <div class="info-icon">ğŸ</div>
                    <div class="info-content">
                        <strong>Valor do Presente:</strong>
                        <p>Entre R$ 20,00 e R$ 30,00</p>
                    </div>
                </div>
                <div class="info-item">
                    <div class="info-icon">ğŸ’¡</div>
                    <div class="info-content">
                        <strong>Dica:</strong>
                        <p>Valorize a criatividade e o carinho! Surpreenda seu amigo(a)!</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Alertas -->
        <div id="alertContainer"></div>

        <!-- Loading -->
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Processando...</p>
        </div>

        <!-- Card: FormulÃ¡rio de InscriÃ§Ã£o -->
        <section class="card card-form">
            <div class="card-header">
                <h2>ğŸ“ FaÃ§a sua InscriÃ§Ã£o</h2>
                <p>Preencha os dados abaixo para participar</p>
            </div>
            <div class="card-body">
                <form id="inscricaoForm">
                    <div class="form-group">
                        <label for="nome">ğŸ‘¤ Seu Nome Completo:</label>
                        <input type="text" id="nome" name="nome" required placeholder="Ex: JoÃ£o da Silva">
                    </div>

                    <div class="form-group">
                        <label for="whatsapp">ğŸ“± Telefone WhatsApp:</label>
                        <input type="tel" id="whatsapp" name="whatsapp" required placeholder="Ex: (99) 99999-9999">
                    </div>

                    <div class="form-group">
                        <label for="sugestoes">ğŸ’­ SugestÃµes de Presente:</label>
                        <textarea id="sugestoes" name="sugestoes" rows="4" required placeholder="Ex: Livros de aventura, chocolates gourmet, vela aromÃ¡tica de baunilha, etc."></textarea>
                    </div>

                    <button type="submit" id="btnSubmit" class="btn btn-primary">âœ¨ Confirmar Minha ParticipaÃ§Ã£o</button>
                </form>
            </div>
        </section>

        <!-- Card: Participantes Confirmados (Lista PÃºblica) -->
        <section class="card card-participants">
            <div class="card-header">
                <h2>ğŸ‘¥ Participantes Confirmados</h2>
                <span class="badge"><span id="totalParticipantes">0</span> Inscritos</span>
            </div>
            <div class="card-body">
                <div id="listaParticipantes"></div>
            </div>
        </section>

        <!-- Card: Consultar Amigo Secreto -->
        <section class="card card-consulta">
            <div class="card-header">
                <h2>ğŸ Consultar Meu Amigo Secreto</h2>
                <p>Digite o cÃ³digo que vocÃª recebeu do organizador</p>
            </div>
            <div class="card-body">
                <div class="form-group">
                    <label for="codigoConsulta">ğŸ”‘ CÃ³digo de Acesso:</label>
                    <input type="text" id="codigoConsulta" placeholder="Digite seu cÃ³digo (ex: ABC123)" maxlength="6">
                </div>

                <button type="button" id="btnConsultar" class="btn btn-success">ğŸ” Consultar Amigo Secreto</button>

                <div id="resultadoConsulta"></div>
            </div>
        </section>

        <!-- Card: ACESSO AO PAINEL (simulaÃ§Ã£o de login) -->
        <section class="card card-admin-login" id="adminLoginCard">
            <div class="card-header">
                <h2>ğŸ”‘ Acesso ao Painel do Organizador</h2>
                <p>Insira a senha mestra para gerenciar o sorteio e os participantes.</p>
            </div>
            <div class="card-body">
                <div class="form-group">
                    <label for="senhaAcessoAdmin">Senha de Acesso:</label>
                    <input type="password" id="senhaAcessoAdmin" placeholder="Senha do Organizador">
                </div>
                <button type="button" id="btnAcessoAdmin" class="btn btn-admin">ğŸ” Entrar no Painel</button>
            </div>
        </section>


        <!-- Card: Painel Administrativo (Inicialmente Oculto) -->
        <section class="card card-admin hidden" id="adminPanelCard">
            <div class="card-header">
                <h2>ğŸ› ï¸ Gerenciamento do Sorteio</h2>
                <button type="button" id="btnSairAdmin" class="btn-logout">Sair do Painel</button>
            </div>
            <div class="card-body">
                <div class="admin-warning">
                    <strong>âš ï¸ ATENÃ‡ÃƒO!</strong>
                    <p>Esta Ã¡rea contÃ©m as ferramentas para realizar o sorteio, visualizar resultados e limpar todos os dados.</p>
                </div>
                
                <div class="btn-group">
                    <button type="button" id="btnSortearTeste" class="btn btn-test">ğŸ§ª Sorteio de Teste</button>
                    <button type="button" id="btnSortear" class="btn btn-primary">ğŸ² Sorteio OFICIAL</button>
                    <button type="button" id="btnVerificarSorteio" class="btn btn-success">âœ… Verificar Sorteio</button>
                    <button type="button" id="btnVerSorteio" class="btn btn-admin">ğŸ‘€ Ver Resultados/CÃ³digos</button>
                    <!-- NOVO BOTÃƒO -->
                    <button type="button" id="btnApagarSorteio" class="btn btn-test">âŒ Apagar Ãšltimo Sorteio</button> 
                    <button type="button" id="btnLimpar" class="btn btn-danger">ğŸ—‘ï¸ Limpar Todos os Dados</button>
                </div>

                <div id="resultadoSorteio"></div>

                <h3 style="color: var(--cor-primaria); margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">ğŸ‘¤ Gerenciar Participantes</h3>
                <p style="color: var(--cor-texto-claro); margin-bottom: 15px;">Abaixo estÃ£o todos os dados, incluindo WhatsApp, e a opÃ§Ã£o para editar/excluir participantes.</p>
                
                <!-- FORMULÃRIO DE EDIÃ‡ÃƒO (Inicialmente Oculto) -->
                <div id="formEdicaoContainer" class="hidden card card-form" style="margin-bottom: 25px;">
                    <div class="card-header">
                        <h2>âœï¸ Editar Participante: <span id="nomeParticipanteEdicao"></span></h2>
                    </div>
                    <div class="card-body">
                        <form id="edicaoForm">
                            <input type="hidden" id="edicaoId">
                            <div class="form-group">
                                <label for="edicaoNome">ğŸ‘¤ Nome Completo:</label>
                                <input type="text" id="edicaoNome" name="edicaoNome" required>
                            </div>

                            <div class="form-group">
                                <label for="edicaoWhatsapp">ğŸ“± Telefone WhatsApp:</label>
                                <input type="tel" id="edicaoWhatsapp" name="edicaoWhatsapp" required>
                            </div>

                            <div class="form-group">
                                <label for="edicaoSugestoes">ğŸ’­ SugestÃµes de Presente:</label>
                                <textarea id="edicaoSugestoes" name="edicaoSugestoes" rows="4" required></textarea>
                            </div>

                            <div class="btn-group" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <button type="submit" class="btn btn-success">ğŸ’¾ Salvar EdiÃ§Ã£o</button>
                                <button type="button" id="btnCancelarEdicao" class="btn btn-admin">â†©ï¸ Cancelar</button>
                                <button type="button" id="btnExcluirEdicao" class="btn btn-danger">ğŸ—‘ï¸ Excluir Participante</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- LISTA DE PARTICIPANTES -->
                <div id="listaAdminParticipantes">
                    <!-- Lista detalhada com botÃ£o de ediÃ§Ã£o/exclusÃ£o serÃ¡ carregada aqui -->
                </div>

            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <p>ğŸ’ Feito com amor para nossa famÃ­lia especial</p>
        <p>Â© 2025 â€¢ Amigo Secreto de Ano Novo</p>
    </footer>

    <!-- JavaScript -->
    <script type="module" src="app.js"></script>
</body>
</html>
